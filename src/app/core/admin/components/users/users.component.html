<div class="navigation">
  <form [formGroup]="userSearchForm" (ngSubmit)="search(userSearchForm.value)">
    <button type="button" (click)="showAll()" class="btn btn-lg btn-primary">{{'all' | translate}} {{'users' | translate}}</button>
    <mat-form-field appearance="outline">
      <mat-label>{{'search' | translate}}</mat-label>
      <input matInput placeholder="{{'type the username' | translate}}" formControlName="username">
    </mat-form-field>
    <button type="submit" class="btn btn-lg btn-info">{{'search' | translate}}</button>
  </form>
</div>


<div class="users mat-elevation-z8">
  <table mat-table matSort [dataSource]="dataSource"  >

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'id' | translate}} </th>
      <td mat-cell *matCellDef="let user"> {{user.userId}} </td>
    </ng-container>

    <ng-container matColumnDef="user-name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'user-name' | translate}} </th>
      <td mat-cell *matCellDef="let user"> {{user.userName}} </td>
    </ng-container>

    <ng-container matColumnDef="first-name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'first-name' | translate}} </th>
      <td mat-cell *matCellDef="let user"> {{user.firstName}} </td>
    </ng-container>

    <ng-container matColumnDef="last-name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'last-name' | translate}} </th>
      <td mat-cell *matCellDef="let user"> {{user.lastName}} </td>
    </ng-container>

    <!-- Weight Column -->
    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'email' | translate}} </th>
      <td mat-cell *matCellDef="let user"> {{user.email}} </td>
    </ng-container>

    <ng-container matColumnDef="state">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'state' | translate}} </th>
      <td mat-cell *matCellDef="let user"> {{user.state}} </td>
    </ng-container>

    <ng-container matColumnDef="ban">
      <th mat-header-cell *matHeaderCellDef> {{'ban' | translate}} </th>
      <td mat-cell *matCellDef="let user">
        <button type="button" (click)="lockUser(user)" class="btn btn-lg btn-danger pull-right"
                *ngIf="!user.locked; else unban">{{'ban' | translate}}
        </button>
        <ng-template #unban>
          <button type="button" (click)="unlockUser(user)" class="btn btn-lg btn-warning pull-right">
            {{'Unban' | translate}}
          </button>
        </ng-template>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  <mat-paginator
    [pageSizeOptions]="[5, 10, 20]"
    (page)="show($event)"
    showFirstLastButtons>
  </mat-paginator>

</div>
